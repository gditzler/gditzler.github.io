# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Build Commands

- `zola build` — build the site to `public/`
- `zola serve` — local dev server with live reload (default: http://127.0.0.1:1111)
- `zola check` — validate internal links and config without building

Zola version: 0.22.x. No npm/node toolchain; SASS compilation is handled by Zola natively.

## Architecture

This is a personal academic website built with [Zola](https://www.getzola.org/) (Rust static site generator). No external theme is used — all templates and styles are custom.

### Theming System

Dark/light theming is the central design concern and touches three layers:

1. **`sass/_variables.scss`** — Defines raw palette colors (NightFox for dark, DayFox for light from nightfox.nvim) under `[data-theme="dark"]` and `[data-theme="light"]` selectors, then maps them to semantic CSS custom properties (`--color-bg`, `--color-link`, etc.). All other SASS partials reference only semantic variables, never raw palette colors.

2. **`templates/base.html`** — Contains an inline `<script>` in `<head>` that synchronously sets `data-theme` on `<html>` before paint (reads `localStorage` → `prefers-color-scheme` → falls back to dark). Also loads two syntax highlight CSS files (`giallo-dark.css`, `giallo-light.css`) generated by Zola's "giallo" engine, toggled via `disabled` attribute.

3. **`static/js/theme-toggle.js`** — Handles toggle button clicks (swaps `data-theme`, persists to `localStorage`, enables/disables the correct syntax CSS). Also handles mobile hamburger menu.

### Template Hierarchy

All templates extend `base.html` (nav, footer, theme toggle, Font Awesome CDN).

- `index.html` — Landing page. Uses `section.*` variables (the root `_index.md` is a Zola section, not a page).
- `page.html` — Generic page used by `about.md` and `publications.md`.
- `blog.html` — Blog listing with pagination. Used by `content/blog/_index.md`.
- `blog-page.html` — Individual blog post with TOC and prev/next nav. Set via `page_template` in blog `_index.md`.
- `section.html` — Fallback section template.

### Content Structure

- `content/_index.md` — Landing page (rendered as a section with `template = "index.html"`).
- `content/about.md` and `content/publications.md` — Standalone pages using `page.html`. Publications are a single markdown file, not individual files per paper.
- `content/blog/` — Blog section. Each `.md` file is a post. Uses `<!-- more -->` for summary breaks.

### SASS Organization

`sass/style.scss` imports all partials in order. Key partials: `_variables` (theming), `_nav` (sticky nav + 768px mobile hamburger breakpoint), `_landing` (hero layout), `_code` (syntax block styling). Max content width is 900px (`_layout.scss`).

### Social Links

Social URLs (GitHub, LinkedIn, Google Scholar, SpeakerDeck) are configured in `zola.toml` under `[extra]` and referenced in templates via `config.extra.*`.

### Syntax Highlighting

Uses class-based highlighting (`style = "class"` in `zola.toml`) with catppuccin-mocha (dark) and catppuccin-latte (light). Zola generates `giallo-dark.css` and `giallo-light.css` at the site root. These are toggled by JS alongside the theme switch.
